

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a plugin &mdash; pretix 3.18.0.dev0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/pretix.css" type="text/css" />

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/pretix.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  

  
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="pretix 3.18.0.dev0 documentation" href="../../index.html"/>
        <link rel="up" title="Plugin development" href="index.html"/>
        <link rel="next" title="Writing an exporter plugin" href="exporter.html"/>
        <link rel="prev" title="Plugin development" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo-white.svg" class="logo" />
          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administrator documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">REST API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../concepts.html">Concepts and Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Development setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribution/index.html">Contributing to pretix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../implementation/index.html">Implementation and Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translation/index.html">Translating pretix</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugin development</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Creating a plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plugin-metadata">Plugin metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-registration">Plugin registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signals">Signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#views">Views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="exporter.html">Writing an exporter plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="ticketoutput.html">Writing a ticket output plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="payment.html">Writing a payment provider plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="payment_2.0.html">Porting a payment provider from pretix 1.x to pretix 2.x</a></li>
<li class="toctree-l3"><a class="reference internal" href="email.html">Writing an HTML e-mail renderer plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="placeholder.html">Writing an e-mail placeholder plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="invoice.html">Writing an invoice renderer plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="shredder.html">Writing a data shredder</a></li>
<li class="toctree-l3"><a class="reference internal" href="import.html">Extending the order import process</a></li>
<li class="toctree-l3"><a class="reference internal" href="customview.html">Creating custom views</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth.html">Pluggable authentication backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="general.html">General APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="quality.html">Plugin quality checklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../structure.html">Directory structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/index.html">Plugin documentation</a></li>
</ul>

            
          
        </div>

          
              
              
                  <div class="version">
                      3.18
                  </div>
              
          
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pretix</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Developer documentation</a> &raquo;</li>
        
          <li><a href="index.html">Plugin development</a> &raquo;</li>
        
      <li>Creating a plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/development/api/plugins.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="creating-a-plugin">
<span id="pluginsetup"></span><h1>Creating a plugin<a class="headerlink" href="#creating-a-plugin" title="Permalink to this heading">¶</a></h1>
<p>It is possible to extend pretix with custom Python code using the official plugin
API. Every plugin has to be implemented as an independent Django ‘app’ living
in its own python package installed like any other python module. There are also some
official plugins inside the <code class="docutils literal notranslate"><span class="pre">pretix/plugins/</span></code> directory of your pretix installation.</p>
<p>The communication between pretix and the plugins happens mostly using Django’s
<a class="reference external" href="https://docs.djangoproject.com/en/3.0/topics/signals/">signal dispatcher</a> feature. The core modules of pretix, <code class="docutils literal notranslate"><span class="pre">pretix.base</span></code>,
<code class="docutils literal notranslate"><span class="pre">pretix.control</span></code> and <code class="docutils literal notranslate"><span class="pre">pretix.presale</span></code> expose a number of signals which are documented
on the next pages.</p>
<p>To create a new plugin, create a new python package which must be a valid <a class="reference external" href="https://docs.djangoproject.com/en/3.0/ref/applications/">Django app</a>
and must contain plugin metadata, as described below.
There is some boilerplate that you will need for every plugin to get started. To save your
time, we created a <a class="reference external" href="https://cookiecutter.readthedocs.io/en/latest/">cookiecutter</a> template that you can use like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>$ pip install cookiecutter
$ cookiecutter https://github.com/pretix/pretix-plugin-cookiecutter
</pre></div>
</div>
<p>This will ask you some questions and then create a project folder for your plugin.</p>
<p>The following pages go into detail about the several types of plugins currently
supported. While these instructions don’t assume that you know a lot about pretix,
they do assume that you have prior knowledge about Django (e.g. its view layer,
how its ORM works, etc.).</p>
<section id="plugin-metadata">
<h2>Plugin metadata<a class="headerlink" href="#plugin-metadata" title="Permalink to this heading">¶</a></h2>
<p>The plugin metadata lives inside a <code class="docutils literal notranslate"><span class="pre">PretixPluginMeta</span></code> class inside your app’s
configuration class. The metadata class must define the following attributes:</p>
<table class="rest-resource-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>The human-readable name of your plugin</p></td>
</tr>
<tr class="row-odd"><td><p>author</p></td>
<td><p>string</p></td>
<td><p>Your name</p></td>
</tr>
<tr class="row-even"><td><p>version</p></td>
<td><p>string</p></td>
<td><p>A human-readable version code of your plugin</p></td>
</tr>
<tr class="row-odd"><td><p>description</p></td>
<td><p>string</p></td>
<td><p>A more verbose description of what your plugin does.</p></td>
</tr>
<tr class="row-even"><td><p>category</p></td>
<td><p>string</p></td>
<td><p>Category of a plugin. Either one of <code class="docutils literal notranslate"><span class="pre">&quot;FEATURE&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;PAYMENT&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;INTEGRATION&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;CUSTOMIZATION&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;FORMAT&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;API&quot;</span></code>,
or any other string.</p></td>
</tr>
<tr class="row-odd"><td><p>visible</p></td>
<td><p>boolean (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code> by default, can hide a plugin so it cannot be normally activated.</p></td>
</tr>
<tr class="row-even"><td><p>restricted</p></td>
<td><p>boolean (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code> by default, restricts a plugin such that it can only be enabled
for an event by system administrators / superusers.</p></td>
</tr>
<tr class="row-odd"><td><p>compatibility</p></td>
<td><p>string</p></td>
<td><p>Specifier for compatible pretix versions.</p></td>
</tr>
</tbody>
</table>
<p>A working example would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">try</span><span class="p">:</span>
<span class="linenos"> 2</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">pretix.base.plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">PluginConfig</span>
<span class="linenos"> 3</span><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="linenos"> 4</span>    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Please use pretix 2.7 or above to run this plugin!&quot;</span><span class="p">)</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">gettext_lazy</span> <span class="k">as</span> <span class="n">_</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">class</span><span class="w"> </span><span class="nc">PaypalApp</span><span class="p">(</span><span class="n">PluginConfig</span><span class="p">):</span>
<span class="linenos"> 9</span>    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;pretix_paypal&#39;</span>
<span class="linenos">10</span>    <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;PayPal&quot;</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="k">class</span><span class="w"> </span><span class="nc">PretixPluginMeta</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="n">name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;PayPal&quot;</span><span class="p">)</span>
<span class="linenos">14</span>        <span class="n">author</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;the development team&quot;</span><span class="p">)</span>
<span class="linenos">15</span>        <span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;1.0.0&#39;</span>
<span class="linenos">16</span>        <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;PAYMENT</span>
<span class="linenos">17</span>        <span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">18</span>        <span class="n">restricted</span> <span class="o">=</span> <span class="kc">False</span>
<span class="linenos">19</span>        <span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;This plugin allows you to receive payments via PayPal&quot;</span><span class="p">)</span>
<span class="linenos">20</span>        <span class="n">compatibility</span> <span class="o">=</span> <span class="s2">&quot;pretix&gt;=2.7.0&quot;</span>
<span class="linenos">21</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">default_app_config</span> <span class="o">=</span> <span class="s1">&#39;pretix_paypal.PaypalApp&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> class may implement a property <code class="docutils literal notranslate"><span class="pre">compatibility_errors</span></code>, that checks
whether the pretix installation meets all requirements of the plugin. If so,
it should contain <code class="docutils literal notranslate"><span class="pre">None</span></code> or an empty list, otherwise a list of strings containing
human-readable error messages. We recommend using the <code class="docutils literal notranslate"><span class="pre">django.utils.functional.cached_property</span></code>
decorator, as it might get called a lot. You can also implement <code class="docutils literal notranslate"><span class="pre">compatibility_warnings</span></code>,
those will be displayed but not block the plugin execution.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> class may implement a method <code class="docutils literal notranslate"><span class="pre">is_available(event)</span></code> that checks if a plugin
is available for a specific event. If not, it will not be shown in the plugin list of that event.</p>
</section>
<section id="plugin-registration">
<h2>Plugin registration<a class="headerlink" href="#plugin-registration" title="Permalink to this heading">¶</a></h2>
<p>Somehow, pretix needs to know that your plugin exists at all. For this purpose, we
make use of the <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#locating-plugins">entry point</a> feature of setuptools. To register a plugin that lives
in a separate python package, your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> should contain something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">setup</span><span class="p">(</span>
<span class="linenos">2</span>    <span class="n">args</span><span class="o">...</span><span class="p">,</span>
<span class="linenos">3</span>    <span class="n">entry_points</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">4</span><span class="s2">[pretix.plugin]</span>
<span class="linenos">5</span><span class="s2">pretix_paypal=pretix_paypal:PretixPluginMeta</span>
<span class="linenos">6</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">7</span><span class="p">)</span>
</pre></div>
</div>
<p>This will automatically make pretix discover this plugin as soon as it is installed e.g.
through <code class="docutils literal notranslate"><span class="pre">pip</span></code>. During development, you can just run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> inside
your plugin source directory to make it discoverable.</p>
</section>
<section id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Permalink to this heading">¶</a></h2>
<p>The various components of pretix define a number of signals which your plugin can
listen for. We will go into the details of the different signals in the following
pages. We suggest that you put your signal receivers into a <code class="docutils literal notranslate"><span class="pre">signals</span></code> submodule
of your plugin. You should extend your <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> (see above) by the following
method to make your receivers available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>class PaypalApp(AppConfig):
<span class="linenos">2</span>    …
<span class="linenos">3</span>
<span class="linenos">4</span>    def ready(self):
<span class="linenos">5</span>        from . import signals  # NOQA
</pre></div>
</div>
<p>You can optionally specify code that is executed when your plugin is activated for an event
in the <code class="docutils literal notranslate"><span class="pre">installed</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>class PaypalApp(AppConfig):
<span class="linenos">2</span>    …
<span class="linenos">3</span>
<span class="linenos">4</span>    def installed(self, event):
<span class="linenos">5</span>        pass  # Your code here
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">installed</span></code> will <em>not</em> be called if the plugin is indirectly activated for an event
because the event is created with settings copied from another event.</p>
</section>
<section id="views">
<h2>Views<a class="headerlink" href="#views" title="Permalink to this heading">¶</a></h2>
<p>Your plugin may define custom views. If you put an <code class="docutils literal notranslate"><span class="pre">urls</span></code> submodule into your
plugin module, pretix will automatically import it and include it into the root
URL configuration with the namespace <code class="docutils literal notranslate"><span class="pre">plugins:&lt;label&gt;:</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code> is
your Django app label.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you define custom URLs and views, you are currently on your own
with checking that the calling user is logged in, has appropriate permissions,
etc. We plan on providing native support for this in a later version.</p>
</div>
</section>
</section>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exporter.html" class="btn btn-neutral float-right" title="Writing an exporter plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Plugin development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2025, Raphael Michel.

    </p>
  </div>
    <small>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a theme that is based on a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.</small> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.18.0.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
      <script type="text/javascript" src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Backups and Monitoring &mdash; pretix 3.18.0.dev0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/pretix.css" type="text/css" />

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/pretix.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  

  
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pretix 3.18.0.dev0 documentation" href="../index.html"/>
        <link rel="up" title="Administrator documentation" href="index.html"/>
        <link rel="next" title="Scaling guide" href="scaling.html"/>
        <link rel="prev" title="Configuration file" href="config.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-white.svg" class="logo" />
          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administrator documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation/index.html">Installation guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuration file</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Backups and Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backups">Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uptime-monitoring">Uptime monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-monitoring">Performance monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#available-metrics">Available metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scaling.html">Scaling guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="indexes.html">Additional database indices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugin documentation</a></li>
</ul>

            
          
        </div>

          
              
              
                  <div class="version">
                      3.18
                  </div>
              
          
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pretix</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Administrator documentation</a> &raquo;</li>
        
      <li>Backups and Monitoring</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/admin/maintainance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="backups-and-monitoring">
<span id="maintainance"></span><h1>Backups and Monitoring<a class="headerlink" href="#backups-and-monitoring" title="Permalink to this heading">¶</a></h1>
<p>If you host your own pretix instance, you also need to care about the availability
of your service and the safety of your data yourself. This page gives you some
information that you might need to do so properly.</p>
<section id="backups">
<h2>Backups<a class="headerlink" href="#backups" title="Permalink to this heading">¶</a></h2>
<p>There are essentially two things which you should create backups of:</p>
<dl class="simple">
<dt>Database</dt><dd><p>Your SQL database (MySQL or PostgreSQL). This is critical and you should <strong>absolutely
always create automatic backups of your database</strong>. There are tons of tutorials on the
internet on how to do this, and the exact process depends on the choice of your database.
For MySQL, see <code class="docutils literal notranslate"><span class="pre">mysqldump</span></code> and for PostgreSQL, see the <code class="docutils literal notranslate"><span class="pre">pg_dump</span></code> tool. You probably
want to create a cronjob that does the backups for you on a regular schedule.</p>
</dd>
<dt>Data directory</dt><dd><p>The data directory of your pretix configuration might contain some things that you should
back up. If you did not specify a secret in your config file, back up the <code class="docutils literal notranslate"><span class="pre">.secret</span></code> text
file in the data directory. If you lose your secret, all currently active user sessions,
password reset links and similar things will be rendered invalid. Also, you probably want
to backup the <code class="docutils literal notranslate"><span class="pre">media</span></code> subdirectory of the data directory which contains all user-uploaded
and generated files. This includes files you could in theory regenerate (ticket downloads)
but also files that you might be legally required to keep (invoice PDFs) or files that you
would need to re-upload (event logos, product pictures, etc.). It is up to you if you
create regular backups of this data, but we strongly advise you to do so. You can create
backups e.g. using <code class="docutils literal notranslate"><span class="pre">rsync</span></code>. There is a lot of information on the internet on how to create
backups of folders on a Linux machine.</p>
</dd>
</dl>
<p>There is no need to create backups of the redis database, if you use it. We only use it for
non-critical, temporary or cached data.</p>
</section>
<section id="uptime-monitoring">
<h2>Uptime monitoring<a class="headerlink" href="#uptime-monitoring" title="Permalink to this heading">¶</a></h2>
<p>To monitor whether your pretix instance is running, you can issue a GET request to
<code class="docutils literal notranslate"><span class="pre">https://pretix.mydomain.com/healthcheck/</span></code>. This endpoint tests if the connection to the
database, to the configured cache and to redis (if used) is working correctly. If everything
appears to work fine, an empty response with status code <code class="docutils literal notranslate"><span class="pre">200</span></code> is returned.
If there is a problem, a status code in the <code class="docutils literal notranslate"><span class="pre">5xx</span></code> range will be returned.</p>
</section>
<section id="performance-monitoring">
<span id="perf-monitoring"></span><h2>Performance monitoring<a class="headerlink" href="#performance-monitoring" title="Permalink to this heading">¶</a></h2>
<p>If you want to generate detailed performance statistics of your pretix installation, there is an
endpoint at <code class="docutils literal notranslate"><span class="pre">https://pretix.mydomain.com/metrics</span></code> (no slash at the end) which returns a
number of values in the text format understood by monitoring tools like <a class="reference external" href="https://prometheus.io/">Prometheus</a>. This data
is only collected and exposed if you enable it in the <a class="reference internal" href="config.html#metrics-settings"><span class="std std-ref">Metrics</span></a> section of your
pretix configuration. You can also configure basic auth credentials there to protect your
statistics against unauthorized access. The data is temporarily collected in redis, so the
performance impact of this feature depends on the connection to your redis database.</p>
<p>Currently, mostly response times of HTTP requests and background tasks are exposed.</p>
<p>If you want to go even further, you can set the <code class="docutils literal notranslate"><span class="pre">profile</span></code> option in the <a class="reference internal" href="config.html#django-settings"><span class="std std-ref">Django settings</span></a>
section to a value between 0 and 1. If you set it for example to 0.1, then 10% of your requests
(randomly selected) will be run with <a class="reference external" href="https://docs.python.org/3/library/profile.html">cProfile</a> activated. The profiling results will be saved
to your data directory. As this might impact performance significantly and writes a lot of data
to disk, we recommend to only enable it for a small number of requests – and only if you are
really interested in the results.</p>
<section id="available-metrics">
<h3>Available metrics<a class="headerlink" href="#available-metrics" title="Permalink to this heading">¶</a></h3>
<p>The metrics available in pretix follow the standard <a class="reference external" href="https://prometheus.io/docs/concepts/metric_types/">metric types</a> from the Prometheus world.
Currently, the following metrics are exported:</p>
<dl class="simple">
<dt>pretix_view_requests_total</dt><dd><p>Counter. Counts requests to Django views, labeled with the resolved <code class="docutils literal notranslate"><span class="pre">url_name</span></code>, the used
HTTP <code class="docutils literal notranslate"><span class="pre">method</span></code> and the <code class="docutils literal notranslate"><span class="pre">status_code</span></code> returned.</p>
</dd>
<dt>pretix_view_durations_seconds</dt><dd><p>Histogram. Measures duration of requests to Django views, labeled with the resolved
<code class="docutils literal notranslate"><span class="pre">url_name</span></code>, the used HTTP <code class="docutils literal notranslate"><span class="pre">method</span></code> and the <code class="docutils literal notranslate"><span class="pre">status_code</span></code> returned.</p>
</dd>
<dt>pretix_task_runs_total</dt><dd><p>Counter. Counts executions of background tasks, labeled with the <code class="docutils literal notranslate"><span class="pre">task_name</span></code> and the
<code class="docutils literal notranslate"><span class="pre">status</span></code>. The latter can be <code class="docutils literal notranslate"><span class="pre">success</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code> or <code class="docutils literal notranslate"><span class="pre">expected-error</span></code>.</p>
</dd>
<dt>pretix_task_duration_seconds</dt><dd><p>Histogram. Measures duration of successful background task executions, labeled with the
<code class="docutils literal notranslate"><span class="pre">task_name</span></code>.</p>
</dd>
<dt>pretix_model_instances</dt><dd><p>Gauge. Measures number of instances of a certain model within the database, labeled with
the <code class="docutils literal notranslate"><span class="pre">model</span></code> name. Starting with pretix 3.11, these numbers might only be approximate for
most tables when running on PostgreSQL to mitigate performance impact.</p>
</dd>
<dt>pretix_celery_tasks_queued_count</dt><dd><p>The number of background tasks in the worker queue, labeled with <code class="docutils literal notranslate"><span class="pre">queue</span></code>.</p>
</dd>
<dt>pretix_celery_tasks_queued_age_seconds</dt><dd><p>The age of the longest-waiting in the worker queue in seconds, labeled with <code class="docutils literal notranslate"><span class="pre">queue</span></code>.</p>
</dd>
</dl>
</section>
</section>
</section>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scaling.html" class="btn btn-neutral float-right" title="Scaling guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config.html" class="btn btn-neutral" title="Configuration file" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2025, Raphael Michel.

    </p>
  </div>
    <small>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a theme that is based on a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.</small> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.18.0.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
      <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>